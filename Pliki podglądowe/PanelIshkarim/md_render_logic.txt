# ğŸ“„ MD_RENDER_LOGIC.md â€“ System Å‚adowania i renderowania treÅ›ci `.md`

## ğŸ¯ Cel
StworzyÄ‡ spÃ³jny, rozszerzalny system do renderowania plikÃ³w `.md` w interfejsie uÅ¼ytkownika (np. Aerendal, sekcje tematyczne), z obsÅ‚ugÄ… stylÃ³w, trybÃ³w odbioru, zabezpieczeÅ„ oraz filtrowania.

---

## ğŸ“‚ Struktura treÅ›ci

### ğŸ“ Foldery ÅºrÃ³dÅ‚owe
```
/aerendal/teksty/*.md
/sections/<sekcja>/<styl>/<plik>.md
```

### ğŸ”– PrzykÅ‚ad nazewnictwa w `/sections`:
```
/sections/tarot/zadaniowiec/struktury_arkana.md
/sections/tarot/wrazliwy/obraz_gleboki.md
/sections/tarot/opiekun/droga_karty.md
```

---

## ğŸ§  Logika routingu
- Wybrana sekcja â†’ `tarot`
- Wybrany tryb â†’ `wrazliwy`
- System Å‚aduje: `/sections/tarot/wrazliwy/index.json` â†’ lista wpisÃ³w z tytuÅ‚ami + plikiem
- NastÄ™pnie renderuje wskazany plik `.md`

---

## ğŸ”§ NarzÄ™dzia renderujÄ…ce
- ğŸ“¦ `marked.js` â€“ konwersja Markdown â†’ HTML
- âœ¨ `DOMPurify` â€“ filtracja niebezpiecznego HTML (jeÅ›li wÅ‚Ä…czymy osadzony kod)

---

## ğŸ” Zabezpieczenia
- `oncontextmenu="return false"` + CSS `user-select: none`
- blokowanie pobierania poprzez brak przycisku i API `no-cache`
- ochrona przez system stylu `prose-invert`, uniemoÅ¼liwiajÄ…cy Å‚atwe kopiowanie stylÃ³w

---

## ğŸ¨ Styl renderu
- Klasa: `prose prose-invert max-w-none`
- Kolory zaleÅ¼ne od tonu (np. `zadaniowiec` = ciemny niebieski, `wrazliwy` = fioletowy, `opiekun` = zÅ‚oty beÅ¼)
- Delikatne animacje wejÅ›cia (np. `fadeIn`, `blur-in`)

---

## ğŸ” Tryby integracji
- ğŸ”¸ Strefa Aerendal â€“ Å‚adujemy `aerendal_index.json` â†’ wskazany `.md`
- ğŸ”¸ Sekcje tematyczne â€“ `GET /sections/:sekcja/:styl/index.json` â†’ wybÃ³r treÅ›ci
- ğŸ”¸ Admin panel â€“ przypisywanie plikÃ³w `.md` do odpowiednich trybÃ³w/Å›cieÅ¼ek

---

## âœ… Status
System renderowania plikÃ³w `.md` gotowy do integracji z interfejsami. Gotowy backend = Flask API serwujÄ…ce pliki z odpowiednich Å›cieÅ¼ek, z routingiem i filtrem trybu.

DziÄ™ki temu kaÅ¼da sekcja moÅ¼e mieÄ‡ swojÄ… gÅ‚Ä™biÄ™, bez mieszania treÅ›ci i stylu odbioru.
