# 🪞 USER_REFLECTION_LOGIC.md – Echo sprzed 30 dni

## 🎯 Cel
Stworzenie subtelnego i wartościowego systemu retrospekcji: możliwość powrotu do siebie sprzed 30 dni, z możliwością zapisania do dziennika, eksportu oraz rozwijania ścieżki refleksji bez presji czy automatycznych analiz.

---

## 📐 Layout (zgodność z innymi panelami)

| Element               | Wymiar       | CSS px (96 DPI) |
|----------------------|--------------|------------------|
| Lista wpisów         | 6 cm × 14 cm | ~230px × 530px   |
| Okno treści refleksji| 14 cm × 14 cm| ~530px × 530px   |
| Pasek nagłówka       | 1 cm         | ~38px            |

---

## 🧱 Główne komponenty

### `slot:reflection_list`
- Lista automatycznie generowanych odniesień do wpisów sprzed 30 dni
- Pokazuje tytuł, źródło (czat, dziennik, tarot), datę, tagi

### `slot:reflection_viewer`
- Okno wyświetlania treści wpisu z możliwością dodania własnej refleksji obok
- Zachowane formatowanie, bez opcji modyfikacji oryginału

### `slot:reflection_actions`
- 🪶 Dodaj do dziennika (tworzy nowy wpis z cytatem + komentarzem)
- 📥 Eksportuj jako `.md` lub `.pdf`

---

## 💡 Styl komunikatów i UX
- Brak presji, zero “kup teraz”
- Subtelne przypomnienie jeśli subskrypcja wygasa:
  > "Twoje Echo Ciszy dobiega końca – chcesz, by jeszcze raz przemówiło?"
- Brak AI analizy – tylko własna refleksja użytkownika
- Funkcja zawsze dostępna, ale tylko wpisy 30 dni wstecz

---

## 🧠 Działanie technologiczne (logika)

### 📆 Harmonogram:
- Codziennie system sprawdza: czy user ma wpis sprzed 30 dni
- Jeśli tak → pokazuje go w `reflection_list`

### 💾 Przechowywanie:
- Lista przechowywana w `/user_journals/{user}/reflection_index.json`
- Treść ładowana z oryginalnych plików (read-only)

### 📤 Eksport:
- Do Markdown (`.md`) lokalnie
- Do PDF (jeśli PDF export aktywowany)
- Do dziennika (jako nowy wpis z cytatem + notatką)

---

## 📦 Integracja z subskrypcją (delikatna)

- Suby = opcja "Echo Echo" (doprecyzowanie starego wpisu + mapa postępu)
- Jeśli `user.subscribed == false`, przycisk ukryty
- Przypomnienie o końcu suba tylko w obszarze refleksji – bez agresji, tylko elegancja

---

## ✅ Status
Struktura gotowa do zaimplementowania. Sloty zgodne z wymiarami Echo Słów i Dziennika. Gotowe do podpięcia do frontendu i systemu harmonogramu codziennego.
