<!-- ishkarim:ui:aerendal_view.html -->
<!--
Interfejs strefy Aerendal – pole podglądu tekstów autorskich ND5, bez pobierania.
-->
<div id="aerendal-container" class="w-[720px] mx-auto mt-8 text-white">
  <h1 class="text-2xl font-semibold mb-4">Strefa Aerendal</h1>

  <!-- Pasek menu z tekstami -->
  <div id="aerendal-menu" class="flex flex-wrap gap-2 mb-4"></div>

  <!-- Okno podglądu 14x14cm -->
  <div id="aerendal-content" class="w-[530px] h-[530px] p-4 bg-white/10 text-white overflow-y-auto rounded-lg border border-white/20 shadow-inner text-sm leading-relaxed prose prose-invert max-w-none">
    <em>Wybierz plik z paska powyżej, by wyświetlić treść.</em>
  </div>

  <!-- Stopka z prawami autorskimi -->
  <p class="text-xs mt-6 text-gray-400 italic">Wszystkie materiały są objęte prawami autorskimi i nie mogą być kopiowane, pobierane ani wykorzystywane poza portalem QuantumMist.</p>
</div>

<script>
  const aerendalMenu = document.getElementById('aerendal-menu');
  const contentBox = document.getElementById('aerendal-content');

  fetch('/aerendal/aerendal_index.json')
    .then(res => res.json())
    .then(data => {
      data.forEach(entry => {
        const btn = document.createElement('button');
        btn.innerText = entry.title;
        btn.title = entry.description;
        btn.className = 'px-3 py-1 bg-indigo-800 hover:bg-indigo-600 rounded text-xs';
        btn.onclick = () => loadAerendalText(entry.file);
        aerendalMenu.appendChild(btn);
      });
    });

  function loadAerendalText(filePath) {
    fetch('/aerendal/' + filePath)
      .then(res => res.text())
      .then(md => {
        contentBox.innerHTML = marked.parse(md);
      });
  }

  document.addEventListener('contextmenu', e => {
    if (e.target.closest('#aerendal-content')) e.preventDefault();
  });
</script>

<style>
  #aerendal-content {
    user-select: none;
  }
</style>
