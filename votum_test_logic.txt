# ğŸ“¡ FILE_SYNC_LOGIC.md â€“ Logika synchronizacji plikÃ³w QuantumMist

## ğŸ¯ Cel
Stworzenie systemu zarzÄ…dzania synchronizacjÄ… lokalnych i zewnÄ™trznych zasobÃ³w w QuantumMist:
- miÄ™dzy Google Drive i GitHub,
- wewnÄ…trz systemu plikÃ³w (lokalnie),
- miÄ™dzy folderami uÅ¼ytkownika i folderami usÅ‚ug (Stragan ÅšwiatÅ‚a, Kosmogramy, Ulubione).

---

## ğŸ—‚ Struktura katalogÃ³w lokalnych
```
/srv/quantummist/
â”œâ”€â”€ frontend/
â”œâ”€â”€ ishkarim_admin/
â”œâ”€â”€ modale/
â”œâ”€â”€ sloty_ai/
â”œâ”€â”€ logs/
â”œâ”€â”€ user_journals/
â”œâ”€â”€ user_favorites/
â”œâ”€â”€ orders_pending/
â”œâ”€â”€ kanwy/
â”œâ”€â”€ sync_drive/
â”œâ”€â”€ sync_github/
â””â”€â”€ sync_config.json
```

---

## ğŸ” Synchronizacja z Google Drive (via rclone)

### ğŸ“„ `sync_config.json`
```json
{
  "aliases": {
    "archiwum": "1A_yVIj_1BLGO6WwlzAGv2O5dCA4kE0Fp",
    "grafiki": "1B1jhPNTlI1HPUpC216d0WYJaP5IniSKT",
    "to_process": "1252L6D0vHESo-urc4Rsts5yANwx1eToR",
    "backupy_zip": "1hsefMwNYIDbGSUrLFDbWcFJ4C8qJvxDj"
  },
  "default_pull": ["to_process"],
  "default_push": ["archiwum", "backupy_zip"]
}
```

### ğŸ§  Rola aliasÃ³w:
- krÃ³tkie nazwy do folderÃ³w,
- wykorzystywane przez skrypty synchronizujÄ…ce,
- pozwalajÄ… unikaÄ‡ twardych ID w kodzie,
- Å‚atwe do zarzÄ…dzania przez operatora ND5.

---

## ğŸŒ GitHub

### Repozytorium:
- `Quantum-Archives/QuantumMist`

### Synchronizacja:
- `sync_github/` â†’ zawartoÅ›Ä‡ pushowana do `main` lub `develop`
- konfiguracja z `.syncignore` (co nie ma iÅ›Ä‡ do repo)
- wersjonowanie rÄ™czne lub przez Ishkarim Terminal

---

## ğŸ§© Synchronizowane foldery wewnÄ™trzne

| Folder             | Opis |
|--------------------|------|
| `/user_journals/`  | zapisy i wpisy uÅ¼ytkownikÃ³w |
| `/user_favorites/` | pliki i cytaty dodane jako ulubione |
| `/orders_pending/` | zamÃ³wienia oczekujÄ…ce ze Straganu |
| `/kanwy/`          | eksportowane wpisy jako osobne pliki |
| `/logs/`           | logi systemowe i logi votÃ³w |

---

## ğŸ§  PrzykÅ‚adowe komendy (Bash)
```bash
./gdrive_push.sh
./gdrive_pull.sh grafiki
./github_sync.sh
```

---

## ğŸ›¡ï¸ BezpieczeÅ„stwo i kontrola
- Synchronizacja tylko przez konta z uprawnieniami `sync_master`
- MoÅ¼liwoÅ›Ä‡ logowania kaÅ¼dej synchronizacji w `sync_history.log`
- Zabezpieczenie przed nadpisaniem plikÃ³w uÅ¼ytkownika bez backupu

---

## âœ… Status
Logika gotowa. System obsÅ‚uguje zarÃ³wno zewnÄ™trzne synchronizacje jak i lokalne przepÅ‚ywy miÄ™dzy moduÅ‚ami uÅ¼ytkownika. Gotowy do podpiÄ™cia pod cron oraz Ishkarim Terminal.
